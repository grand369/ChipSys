# Client模块权限配置说明

## 概述

本目录包含了Client模块的权限配置SQL脚本，用于初始化Client模块的API权限管理。

## 文件说明

### 1. client_base_api.sql
- **用途**: 定义Client模块的所有API接口
- **内容**: 包含7个主要服务模块的API定义
  - 会员收藏服务 (member-favorite)
  - 供求信息服务 (supply-demand)
  - 供应商申请服务 (supplier-application)
  - 公开查询服务 (public-query)
  - 会员仪表板服务 (member-dashboard)
  - 会员等级服务 (member-level)
  - 询价报价服务 (inquiry-quote)

### 2. client_base_permission.sql
- **用途**: 定义Client模块的权限结构
- **内容**: 包含权限组和具体权限点的定义
- **权限类型**: 
  - 1: 权限组 (Group)
  - 3: 权限点 (Dot)

### 3. client_base_permission_api.sql
- **用途**: 建立权限与API的关联关系
- **内容**: 将每个权限点与对应的API接口进行关联

### 4. client_base_view.sql
- **用途**: 定义Client模块的前端视图配置
- **内容**: 包含各个模块页面的组件路径映射
- **作用**: 为前端路由提供组件路径，确保菜单点击能正确跳转到对应页面

## 权限结构

```
Client模块 (1100000000000001)
├── 会员收藏 (1100000000000101)
│   ├── 查询收藏 (1100000000000111)
│   ├── 查询收藏分页 (1100000000000112)
│   ├── 添加收藏 (1100000000000113)
│   ├── 更新收藏 (1100000000000114)
│   ├── 删除收藏 (1100000000000115)
│   ├── 批量删除收藏 (1100000000000116)
│   ├── 检查收藏状态 (1100000000000117)
│   └── 切换收藏状态 (1100000000000118)
├── 供求信息 (1100000000000201)
│   ├── 查询供求信息 (1100000000000211)
│   ├── 查询供求信息分页 (1100000000000212)
│   ├── 添加供求信息 (1100000000000213)
│   ├── 更新供求信息 (1100000000000214)
│   ├── 删除供求信息 (1100000000000215)
│   ├── 批量删除供求信息 (1100000000000216)
│   ├── 发布供求信息 (1100000000000217)
│   ├── 关闭供求信息 (1100000000000218)
│   └── 查询公开供求信息 (1100000000000219)
├── 供应商申请 (1100000000000301)
│   ├── 查询供应商申请 (1100000000000311)
│   ├── 查询供应商申请分页 (1100000000000312)
│   ├── 添加供应商申请 (1100000000000313)
│   ├── 更新供应商申请 (1100000000000314)
│   ├── 删除供应商申请 (1100000000000315)
│   ├── 提交供应商申请 (1100000000000316)
│   ├── 撤销供应商申请 (1100000000000317)
│   └── 检查申请状态 (1100000000000318)
├── 公开查询 (1100000000000401)
│   ├── 查询公开供应商 (1100000000000411)
│   ├── 查询供应商详情 (1100000000000412)
│   ├── 查询公开产品 (1100000000000413)
│   ├── 查询产品详情 (1100000000000414)
│   ├── 查询供应商产品 (1100000000000415)
│   └── 搜索功能 (1100000000000416)
├── 会员仪表板 (1100000000000501)
│   ├── 获取仪表板统计 (1100000000000511)
│   ├── 获取收藏统计 (1100000000000512)
│   └── 获取供求统计 (1100000000000513)
├── 会员等级 (1100000000000601)
│   ├── 查询会员等级 (1100000000000611)
│   ├── 查询会员等级分页 (1100000000000612)
│   ├── 获取当前等级 (1100000000000613)
│   ├── 升级会员等级 (1100000000000614)
│   ├── 更新会员等级 (1100000000000615)
│   └── 检查会员权限 (1100000000000616)
└── 询价报价 (1100000000000701)
    ├── 查询询价报价 (1100000000000711)
    ├── 查询询价报价分页 (1100000000000712)
    ├── 查询询价报价列表 (1100000000000713)
    ├── 提交报价 (1100000000000714)
    ├── 更新报价 (1100000000000715)
    ├── 接受报价 (1100000000000716)
    ├── 拒绝报价 (1100000000000717)
    └── 删除报价 (1100000000000718)
```

## 使用方法

### 1. 执行顺序
请按照以下顺序执行SQL脚本：
1. `client_base_api.sql` - 先创建API定义
2. `client_base_permission.sql` - 再创建权限结构
3. `client_base_permission_api.sql` - 最后建立关联关系

### 2. 角色权限分配
执行完上述脚本后，可以通过以下方式为角色分配权限：

```sql
-- 为角色分配Client模块权限（示例）
INSERT INTO base_role_permission (platform, role_id, permission_id, created_user_id, created_user_name, created_user_real_name, created_time)
SELECT NULL, 1, id, 161223411986501, 'admin', '管理员', '2025-01-10T10:00:00'
FROM base_permission 
WHERE id >= 1000000000000001 AND id <= 1000000000000718;
```

### 3. 权限验证
权限配置完成后，系统会自动验证用户是否有权限访问对应的API接口。

## 注意事项

1. **ID范围**: 所有Client模块的ID都使用1100000000000001-1100000000000718范围，避免与Admin模块的ID冲突
2. **依赖关系**: 必须先执行API和权限的创建脚本，再执行关联脚本
3. **角色分配**: 需要手动为相应的角色分配这些权限
4. **权限更新**: 如果API接口有变更，需要同步更新对应的权限配置
5. **更新说明**: 如果之前使用了1000000000000001范围的ID，请使用update_client_ids.sql脚本进行更新

## 扩展说明

如果需要添加新的API接口或权限，请遵循以下规则：
1. 使用1100000000000719及以上的ID
2. 保持权限结构与API结构的一致性
3. 及时更新权限与API的关联关系
4. 更新本文档的权限结构说明
